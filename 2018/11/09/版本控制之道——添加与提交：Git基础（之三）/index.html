<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>版本控制之道——添加与提交：Git基础（之三） | 手心暖手背</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">版本控制之道——添加与提交：Git基础（之三）</h1><a id="logo" href="/.">手心暖手背</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">版本控制之道——添加与提交：Git基础（之三）</h1><div class="post-meta"><a href="/2018/11/09/版本控制之道——添加与提交：Git基础（之三）/#comments" class="comment-count"></a><p><span class="date">Nov 09, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h4 id="第一节-添加文件到暂存区"><a href="#第一节-添加文件到暂存区" class="headerlink" title="第一节 添加文件到暂存区"></a>第一节 添加文件到暂存区</h4><p><strong>暂存的变更</strong>就是工作目录树中那些你打算提交到版本库中的变更。暂存操作将会更新Git的内部索引。大家常把该索引称为<strong>暂存区</strong>。</p>
<p>通过暂存区，可以设置哪些变更要啊提交到版本库，哪些先不提交。是通过git add命令来实现的。</p>
<p>git add命令加-i参数。该命令会启动交互命令提示符。</p>
<p>把index.html改了句代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cat index.html</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;hello world in Git&lt;/title&gt;</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>然后执行git add -i命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">Orange@DESKTOP-8VK4FUU MINGW64 /d/MyGit/mysite (master)</span><br><span class="line">$ vi index.html</span><br><span class="line"></span><br><span class="line">Orange@DESKTOP-8VK4FUU MINGW64 /d/MyGit/mysite (master)</span><br><span class="line">$ git add -i</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +1/-1 index.html</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status       2: update       3: revert       4: add untracked</span><br><span class="line">  5: patch        6: diff         7: quit         8: help</span><br><span class="line">What now&gt; 2</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +1/-1 index.html</span><br><span class="line">Update&gt;&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:    unchanged        +1/-1 index.html</span><br><span class="line">Update&gt;&gt;</span><br><span class="line">updated 1 path</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status       2: update       3: revert       4: add untracked</span><br><span class="line">  5: patch        6: diff         7: quit         8: help</span><br><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +1/-1      nothing index.html</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status       2: update       3: revert       4: add untracked</span><br><span class="line">  5: patch        6: diff         7: quit         8: help</span><br><span class="line">What now&gt; 3</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:        +1/-1      nothing index.html</span><br><span class="line">Revert&gt;&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:        +1/-1      nothing index.html</span><br><span class="line">Revert&gt;&gt;</span><br><span class="line">reverted 1 path</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status       2: update       3: revert       4: add untracked</span><br><span class="line">  5: patch        6: diff         7: quit         8: help</span><br><span class="line">What now&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +1/-1 index.html</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status       2: update       3: revert       4: add untracked</span><br><span class="line">  5: patch        6: diff         7: quit         8: help</span><br><span class="line">What now&gt; 5</span><br><span class="line">           staged     unstaged path</span><br><span class="line">  1:    unchanged        +1/-1 index.html</span><br><span class="line">Patch update&gt;&gt; 1</span><br><span class="line">           staged     unstaged path</span><br><span class="line">* 1:    unchanged        +1/-1 index.html</span><br><span class="line">Patch update&gt;&gt;</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 9dbc6fa..48f7176 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -4,7 +4,7 @@</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">-               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;Biography&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br><span class="line">Stage this hunk [y,n,q,a,d,e,?]? ?</span><br><span class="line">y - stage this hunk</span><br><span class="line">n - do not stage this hunk</span><br><span class="line">q - quit; do not stage this hunk or any of the remaining ones</span><br><span class="line">a - stage this hunk and all later hunks in the file</span><br><span class="line">d - do not stage this hunk or any of the later hunks in the file</span><br><span class="line">e - manually edit the current hunk</span><br><span class="line">? - print help</span><br><span class="line">@@ -4,7 +4,7 @@</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">-               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;Biography&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br><span class="line">Stage this hunk [y,n,q,a,d,e,?]? n</span><br><span class="line"></span><br><span class="line">*** Commands ***</span><br><span class="line">  1: status       2: update       3: revert       4: add untracked</span><br><span class="line">  5: patch        6: diff         7: quit         8: help</span><br><span class="line">What now&gt; 7</span><br><span class="line">Bye.</span><br></pre></td></tr></table></figure>
<p><strong>git add -i</strong>，进入一级菜单，选一种操作，然后进行二级菜单进行对应的操作。</p>
<p>想要添加文件到暂存区，输入2；下边显示出了有1个文件需要添加，所以输入1.该文件前边出现*，表示该文件将暂存。如果想退出该模式，直接回车键就又回到主菜单了。</p>
<p>回到主菜单后，选1，可以看到有一个已暂存的修改，而没有未暂存的修改了。</p>
<p>如果想要取消已暂存的修改，可以使用revert模式。选3，然后1个文件，选1，然后回车键出来回到主菜单。选1查看之前的修改变成了未暂存的状态。</p>
<p>如果想要暂存还没有被git跟踪的文件，一开始选2是update,说明暂存的是已在版本库里的文件。没暂存的选4.</p>
<p>“patch”模式，进入patch模式后，可以选择单个或多个文件，选择后，git会显示这些文件的当前内容与版本库中的差异，然后你可以根据此决定是否添加这些修改到暂存区。操作：5，1，回车。</p>
<p>可以根据需要决定是否添加该文本块。文本块由文件中连续的修改构成，文件中不同的区域作为不同的文本块。</p>
<p>输入y：接受修改； n：忽略修改；a：添加剩余修改 d:放弃剩余修改 ?：帮助</p>
<p><strong>git add -p</strong>直接进入补丁模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git add -p</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 9dbc6fa..48f7176 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -4,7 +4,7 @@</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">-               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;Biography&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br><span class="line">Stage this hunk [y,n,q,a,d,e,?]? y</span><br></pre></td></tr></table></figure>
<p>输入y选择文件块，然后该文件就处于暂存状态并准备提交。</p>
<h4 id="第二节-提交修改"><a href="#第二节-提交修改" class="headerlink" title="第二节 提交修改"></a>第二节 提交修改</h4><p><em>Git不跟踪空目录。此前的解决办法，在想要跟踪的目录里添加一个空文件，并把该文件添加到版本控制中。这个空文件的文件名可以是任意的名称，但是大家通常用于以.开头的文件名。。因为大多数文件系统在显示目录内容时，会忽略以句点开头的文件。</em></p>
<p>提交并不是把修改发送到某个中央版本库中，而是提交到本地版本库。</p>
<p>但其他人可以从你的本地版本库中拖入修改，或者你从本地版本库推入某个其他的版本库。</p>
<p>git commit命令必须提交留言。 可以使用一个或多个-m。</p>
<p>如果不输入-m参数，Git将启动编辑器来编辑提交留言。为启动编辑器，Git会按照以下顺序来查找编辑器的设置：</p>
<ol>
<li>环境变量GIT_EDITOR的值；</li>
<li>Git的设置 core.editor的值</li>
<li>环境变量VISUAL的值</li>
<li>环境变量EDITOR的值</li>
<li>如果上述值均为空工，Git会尝试启动vi编辑器</li>
</ol>
<p>下面时git启动vi编辑器的情况。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Please enter the commit message for your changes. Lines starting</span><br><span class="line"># with &apos;#&apos; will be ignored, and an empty message aborts the commit.</span><br><span class="line">#</span><br><span class="line"># On branch master</span><br><span class="line"># Changes to be committed:</span><br><span class="line">#       modified:   index.html</span><br><span class="line">#</span><br><span class="line"># Untracked files:</span><br><span class="line">#       mysite-1.0.tar.gz</span><br><span class="line">#</span><br><span class="line">~</span><br></pre></td></tr></table></figure>
<p>下面学习三种提交方法</p>
<ol>
<li><p>【提交暂存后的修改】 git add（/git add -p）加入暂存区； git commit -m 完成提交。</p>
</li>
<li><p>【提交工作目录树中的所有修改】git commit -m “changes” -a</p>
<p>Git会把工作目录树中当前所有的修改提交到版本库中。这种情况下，git只会把已纳入版本控制的文件添加到版本库，而不会添加尚未被跟踪的文件。</p>
</li>
<li><p>【提交工作目录树中指定的修改】git commit -m “changes” some-file-name</p>
<p>提交指定的文件或文件列表</p>
<p>第一种适用于提交文件的一部分修改时，用先暂存后提交的方法比较合适。后两种时直接提交。</p>
<h4 id="第三节-查看修改内容"><a href="#第三节-查看修改内容" class="headerlink" title="第三节 查看修改内容"></a>第三节 查看修改内容</h4><p>查看当前状态 <strong>git status</strong></p>
<p>该命令的输出结果是暂存区内要提交的内容，工作目录树中未纳入暂存区的改动，以及尚未纳入Git版本控制的新文件。以下显示的是（待提交变更）部分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   index.html</span><br></pre></td></tr></table></figure>
<p>下面修改index.xml，插入了<li><a href="contact.html">Contact</a></li>这句话。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat index.html</span><br><span class="line">&lt;html&gt;</span><br><span class="line">        &lt;head&gt;</span><br><span class="line">                &lt;title&gt;hello world in Git&lt;/title&gt;</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;contact.html&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这时候再执行git status命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   index.html</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line"></span><br><span class="line">        modified:   index.html</span><br></pre></td></tr></table></figure>
<p>可以看到index.html文件显示了两遍。Changes to be committed（待提交变更）部分中的那个对应之前已经暂存的修改；和Changed but not updated（未更新到索引的变更）部分中的那个对应还未暂存的修改。颜色分别为绿色和红色。</p>
<p>用<strong>git diff</strong> 命令来查看文件的改动：git diff命令不加参数，比较的是工作目录树和暂存区之间的区别。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 48f7176..60d0512 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -5,6 +5,7 @@</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">                &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;contact.html&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><strong>git diff –cached</strong>命令，比较暂存区和版本库中的区别: -表示该行被删除了；git删除的内容标记为红色，添加的内容则为绿色。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 9dbc6fa..48f7176 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -4,7 +4,7 @@</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">-               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;Biography&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>git diff HEAD比较工作目录树（包括暂存和未暂存的修改）与版本库中的差别： HEAD表示当前所在分支末梢的最新提交。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git diff HEAD</span><br><span class="line">diff --git a/index.html b/index.html</span><br><span class="line">index 9dbc6fa..60d0512 100644</span><br><span class="line">--- a/index.html</span><br><span class="line">+++ b/index.html</span><br><span class="line">@@ -4,7 +4,8 @@</span><br><span class="line">                &lt;meta name = &quot;description&quot; content=&quot;hello world in Git&quot;/&gt;</span><br><span class="line">        &lt;/head&gt;</span><br><span class="line">        &lt;body&gt;</span><br><span class="line">-               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;Biography&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;bio.html&quot;&gt;about&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">+               &lt;li&gt;&lt;a href=&quot;contact.html&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;h1&gt;hello world!&lt;/h1&gt;</span><br><span class="line">        &lt;/body&gt;</span><br><span class="line"> &lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="第四节-管理文件"><a href="#第四节-管理文件" class="headerlink" title="第四节 管理文件"></a>第四节 管理文件</h4><ol>
<li>文件重命名和移动 git mv &lt;原文件名&gt; &lt;新文件名&gt;，该命令告诉Git使用原文件的内容来创建新文件，新文件保留原文件的历史修改记录，并删除原文件。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git mv index.html hello.html</span><br><span class="line">   </span><br><span class="line">Orange@DESKTOP-8VK4FUU MINGW64 /d/MyGit/mysite (master)</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">	(use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line">   </span><br><span class="line">        renamed:    index.html -&gt; hello.html</span><br><span class="line">   </span><br><span class="line">	Changes not staged for commit:</span><br><span class="line">    (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</span><br><span class="line">    (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</span><br><span class="line">   </span><br><span class="line">        modified:   hello.html</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>git并不跟踪管理文件，而是跟踪文件内容。理由：文件名只是附在文件内容上的元数据，以便比较容易地组织文件目录树。Git可以询问文件系统以获得文件名，但Git真正关心的是文件本身的内容。</li>
</ol>
<p>既然Git仅跟踪文件内容，那么他是如何管理文件复制的呢？实际上，无需额外告诉Git存在文件复制，Git自己就可以监测到他。</p>
<ol start="3">
<li>忽略文件</li>
</ol>
<p>.gitignore 来设置版本库级别的忽略； .git/info/exclude来设置本地级别的忽略。</p>
<p>完结（2018.11.12）</p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/11/12/版本控制之道——理解和使用分支（之四）/" class="pre">版本控制之道——理解和使用分支（之四）</a><a href="/2018/11/08/版本控制之道——用Git创建一个项目（之二）/" class="next">版本控制之道——用Git创建一个项目（之二）</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#第一节-添加文件到暂存区"><span class="toc-text">第一节 添加文件到暂存区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第二节-提交修改"><span class="toc-text">第二节 提交修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第三节-查看修改内容"><span class="toc-text">第三节 查看修改内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第四节-管理文件"><span class="toc-text">第四节 管理文件</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/13/版本控制之道——查看Git历史记录（之五）/">版本控制之道——查看Git历史记录（之五）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/12/版本控制之道——理解和使用分支（之四）/">版本控制之道——理解和使用分支（之四）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/09/版本控制之道——添加与提交：Git基础（之三）/">版本控制之道——添加与提交：Git基础（之三）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/08/版本控制之道——用Git创建一个项目（之二）/">版本控制之道——用Git创建一个项目（之二）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/07/版本控制之道——使用git（之一）/">版本控制之道——使用git（之一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/06/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">橘子.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>